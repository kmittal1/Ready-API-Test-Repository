<?xml version="1.0" encoding="UTF-8"?>
<con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Search and Buy TestCase" searchProperties="true" maxResults="0" id="bd5bc347-98a7-4e66-b57f-691e7db558eb" xmlns:con="http://eviware.com/soapui/config"><con:description>TestCase - Search and Buy TestCase

This test is the first expanded TestCase.
It basically tests our entire MockService by doing the following.

1) Logging in
2) Searching for all items in stock
3) Choosing the first items and Buying it
4) Logging out

We also have added LoadTests of all "Strategies"

1) Simple
2) Variance
3) Burst
4) Thread

The thread strategy will produce errors. 
We will go into that further in the TestCase "TestCase - Searching after Logging out LoadTests" in the TestSuite
"Sample TestSuite fails if we don't get faults"</con:description><con:settings><con:setting id="bd5bc347-98a7-4e66-b57f-691e7db558ebfileName">Search-and-Buy-TestCase</con:setting></con:settings><con:testStep type="properties" name="Properties - Username and Password" id="568d2f50-bb15-4647-a3a6-db0961f5eb5a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>Username</con:name><con:value>Logini${=String.valueOf(Math.random()).substring( 0, 5 )}</con:value></con:property><con:property><con:name>Password</con:name><con:value>Logini123</con:value></con:property><con:property><con:name>SearchPhrase</con:name><con:value>Item 1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="request" name="Test Request - login" id="5e25d0d0-0499-4cd2-bdee-0ee678b4e3d4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>ServiceSoapBinding</con:interface><con:operation>login</con:operation><con:request name="Test Request - login" outgoingWss="" incomingWss="" id="0a9b77b7-fe04-4427-8ec6-f930310e3a96"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://127.0.0.1:8088/mockServiceSoapBinding</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:login>
 <username>${Properties - Username and Password#Username}</username>
 <password>${Properties - Username and Password#Password}</password>
 </sam:login>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c81bc8b1-e4ff-41a0-bf32-49cf57b1573f"/><con:assertion type="Schema Compliance" id="f4efc8d7-32d6-48ca-9e06-8c75b3fcea9c"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="b50e0f5e-2730-41f2-aa62-8c0ed17ba4ca"/><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Test Request - search" id="a9c1c768-1ec5-4cfe-9202-cae646a4a17e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>ServiceSoapBinding</con:interface><con:operation>search</con:operation><con:request name="Test Request - search" outgoingWss="" incomingWss="" id="ca95e967-98af-487b-95c2-a19601adb541"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://127.0.0.1:8088/mockServiceSoapBinding</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:search>
 <sessionid>${Test Request - login#Response#//sam:loginResponse/sessionid}</sessionid>
 <searchstring>all</searchstring>
 </sam:search>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="e3cfdffe-ef7d-4f8a-8c6d-113c5397b6b4"/><con:assertion type="Schema Compliance" name="Schema Compliance" id="6b72f1ae-ec85-4f83-bb61-d5065962f254"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="78418de8-2b90-4731-87c1-053afda949d2"/><con:assertion type="XPath Match" id="eab7d684-253f-41d6-8e8e-a9f7043dbe81"><con:configuration><path>declare namespace sam='http://www.soapui.org/sample/';
//sam:searchResponse[1]/sam:searchResponseContent/item[3]/description</path><content>One towel. Massively useful thing. 
Impress the strags with this amazing cloth!</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Test Request - Buy" id="15f3a5c6-e1bb-4e37-8811-b821d3e93878"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>ServiceSoapBinding</con:interface><con:operation>buy</con:operation><con:request name="Test Request - Buy" outgoingWss="" incomingWss="" id="ca84f01a-7c10-4313-a7e8-deebd26e1291"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://127.0.0.1:8088/mockServiceSoapBinding</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:buy>
 <sessionid>${Test Request - login#Response#//sam:loginResponse/sessionid}</sessionid>
 <buystring>${Test Request - search#Response#//sam:searchResponse/sam:searchResponseContent/item[id="Item 5"]/id}</buystring>
 </sam:buy>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="15671287-391b-4298-8c32-4a6270096de3"/><con:assertion type="Schema Compliance" name="Schema Compliance" id="53d7c2b2-1888-4ca2-a796-3a7a95aa5019"><con:configuration/></con:assertion><con:assertion type="SOAP Fault Assertion" id="59da267b-20a1-4b91-900c-8d640f299ee7"/><con:assertion type="XPath Match" id="f7a1696a-16b9-4145-820b-0eb7e55135df"><con:configuration><path>declare namespace sam='http://www.soapui.org/sample/';
//sam:buyResponse/sam:buyResponseContent/purchasestatus/expectedDelivery</path><content>You should already have it.</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Test Request - logout" id="3bd92d18-0010-453d-bae3-fd7aad5d8be3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>ServiceSoapBinding</con:interface><con:operation>logout</con:operation><con:request name="Test Request - logout" outgoingWss="" incomingWss="" id="75513718-c0f6-44a9-8d9c-1e4ee73229db"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://127.0.0.1:8088/mockServiceSoapBinding</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sam="http://www.soapui.org/sample/">
 <soapenv:Header/>
 <soapenv:Body>
 <sam:logout>
 <sessionid>${Test Request - login#Response#//sam:loginResponse/sessionid}</sessionid>
 </sam:logout>
 </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="09376c49-9eab-4909-84e2-2589f52979e2"/><con:assertion type="Schema Compliance" id="2e544db2-608e-4cd6-bc5f-3fbf13ddad77"><con:configuration/></con:assertion><con:credentials><con:username xsi:nil="true"/><con:password xsi:nil="true"/><con:domain xsi:nil="true"/><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:loadTest name="LoadTest - Simple Strategy" id="3a9945c9-b8b7-432c-bfe3-081950a6a188"><con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings><con:threadCount>1</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>false</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>30</con:testLimit><con:limitType>TIME</con:limitType><con:loadStrategy><con:type>Simple</con:type></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:loadTest name="LoadTest - Variance Strategy" id="f65961e4-39ec-46e2-97f9-41ec099b07e4"><con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings><con:threadCount>1</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>false</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>30</con:testLimit><con:limitType>TIME</con:limitType><con:loadStrategy><con:type>Variance</con:type><con:config><interval>5000</interval><variance>0.5</variance></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:loadTest name="LoadTest - Burst Strategy" id="1834b0d5-c5a8-4897-b51b-aea84f3329d9"><con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings><con:threadCount>1</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>false</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>30</con:testLimit><con:limitType>TIME</con:limitType><con:loadStrategy><con:type>Burst</con:type><con:config><burstDelay>5000</burstDelay><burstDuration>5000</burstDuration></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:loadTest name="LoadTest - Thread Strategy" id="3051bbef-2d86-4a05-9e21-fc971a04d30e"><con:settings><con:setting id="HttpSettings@close-connections">false</con:setting></con:settings><con:threadCount>2</con:threadCount><con:startDelay>0</con:startDelay><con:sampleInterval>250</con:sampleInterval><con:calculateTPSOnTimePassed>false</con:calculateTPSOnTimePassed><con:resetStatisticsOnThreadCountChange>true</con:resetStatisticsOnThreadCountChange><con:historyLimit>-1</con:historyLimit><con:testLimit>30</con:testLimit><con:limitType>TIME</con:limitType><con:loadStrategy><con:type>Thread</con:type><con:config><startThreadCount>1</startThreadCount><endThreadCount>2</endThreadCount></con:config></con:loadStrategy><con:assertion type="Step Status" name="Step Status"/><con:maxAssertionErrors>100</con:maxAssertionErrors><con:cancelExcessiveThreads>true</con:cancelExcessiveThreads><con:strategyInterval>500</con:strategyInterval><con:reportParameters/></con:loadTest><con:properties/><con:reportParameters/></con:testCase>